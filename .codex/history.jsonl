{"session_id":"019a0700-6659-7f82-9c89-18fcd6222ffd","ts":1761054575,"text":"/prompts:speckit.constitution Project: NTR Viewer (desktop)\nTech stack: Tauri + TypeScript + Babylon.js\n\nPrinciples\n1) Ship smallest working viewer first. Scope creep is rejected by default.\n2) Deterministic builds. Node 18+, Rust stable. Lockfiles committed.\n3) Type-safety. TypeScript strict: true. No any, no implicit any.\n4) Single responsibility modules. Public APIs documented with TSDoc.\n5) Fast feedback. Unit tests for parsing and geometry. Visual smoke scene for rendering.\n6) Reproducible issues. Provide minimal NTR samples with failing cases.\n7) No silent failures. All user-visible errors routed through a uniform toast/error panel.\n\nCoding standards\n- TSConfig: \"strict\": true, \"noUncheckedIndexedAccess\": true.\n- Lint/format: eslint @typescript-eslint + biome or prettier. Pre-commit hook.\n- Commits: Conventional Commits. PRs require green CI.\n- Folder layout:\n  /app                # frontend\n    /ntr              # lexer, parser, model\n    /geo              # mesh builders, transforms\n    /render           # scene, camera, materials, picking\n    /ui               # panels, file open, drag&drop\n    /assets/samples   # tiny .ntr test files\n    main.ts           # bootstrap\n  /src-tauri          # Tauri commands: file open, fs access\n  /tests              # vitest for TS, headless geometry tests\n- Error handling: Result<T,E> helpers. Never throw across Tauri bridge.\n\nSecurity & privacy\n- No network I/O by default. Open local files only.\n- Optional telemetry: off by default; if enabled, anonymized event counts only.\n\nPerformance budgets\n- Load ≤ 100k triangles and keep ≥ 30 FPS on a mid laptop.\n- File open to first frame target ≤ 2 s for 5k elements.\n- Memory cap guideline: ≤ 1.5 GB.\n\nAccessibility & UX\n- Keyboard for orbit/pan/zoom reset (R), fit-to-view (F), toggle grid (G).\n- High-contrast theme option.\n\nRelease & versioning\n- SemVer. Releases via GitHub Actions. Tauri bundler for Win/macOS/Linux. No tests though, we don't want tests in this project."}
{"session_id":"019a0700-6659-7f82-9c89-18fcd6222ffd","ts":1761055402,"text":"/speckit.specify Title: Local desktop viewer for ROHR2 NTR piping files\n\nProblem\nEngineers need to view an NTR text file as a shaded 3D piping system offline.\n\nUsers\n- Piping engineers, analysts, QA.\n\nAssumptions\n- NTR is line-oriented text describing nodes and components (pipe, bend, reducer, tee, flange).\n- NTR format is described in InterfaceNeutral_e_01.01.md.\n- NTR example file is Example.ntr.\n- Units and coordinate system are present or defaulted (millimeters).\n\nIn-scope MVP\n1) Open .ntr via File→Open and drag/drop.\n2) Parse NTR into a typed graph.\n3) Render shaded 3D with orbit/pan/zoom. Orbit must be constrained to Z-axis (turntable).\n4) Geometry: straight pipes (cylinders), reducers (truncated cones), bends (swept arc/tube).\n5) Fit-to-view, toggle edges, basic lighting.\n6) Selection: click element → highlight + properties (ID, type, size, length).\n7) Basic errors: invalid lines, unit mismatch, unknown component → surfaced list.\n8) Possibility to color elements by property values -> auto categorisation and coloring with random colors (or ramp if numeric)\n\nOut-of-scope MVP\n- Editing or exporting.\n- Line annotation, dimensions.\n- Advanced components: valves with detailed shapes.\n- Network access.\n\nQuality goals\n- Loads 10–50 MB NTR files reliably.\n- Deterministic parse; no crashes on malformed lines.\n\nAcceptance criteria\n- Given a valid sample NTR, app displays a coherent model within 2 seconds on a typical laptop.\n- Dragging another file replaces the scene without restart.\n- Selecting any element shows its properties.\n- Invalid tokens are listed with line numbers; render continues for remaining valid parts.\n- Installers build for Windows and Linux via CI.\n\nNon-functional\n- Offline-only by default.\n- Cross-platform binaries produced by CI."}
{"session_id":"019a0700-6659-7f82-9c89-18fcd6222ffd","ts":1761056013,"text":"continue with next steps"}
{"session_id":"019a0700-6659-7f82-9c89-18fcd6222ffd","ts":1761057093,"text":"continue"}
{"session_id":"019a0700-6659-7f82-9c89-18fcd6222ffd","ts":1761058388,"text":"I am completely new to this kind of project. Are you finished with a working app?"}
